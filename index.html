<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>السيرة الذاتية</title>
    
    <meta name="description" content="قالب سيرة ذاتية احترافي قابل للتعديل.">
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/1D4ED8/FFFFFF?text=CV">
    
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #3b82f6;
            --accent: #f97316;
            --bg-light: #f9fafb;
            --card-light: #ffffff;
            --text-light: #111827;
            --text-muted-light: #6b7280;
            
            --bg-dark: #111827;
            --card-dark: #1f2937;
            --text-dark: #f3f4f6;
            --text-muted-dark: #9ca3af;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-light);
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50 transition-colors">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div id="nav-logo" class="font-bold text-xl text-blue-600"></div>
            <div class="flex items-center space-x-2 rtl:space-x-reverse">
                <button id="languageSwitcher" class="text-gray-600 dark:text-gray-300 font-semibold px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">EN</button>
                <button id="darkModeSwitcher" class="text-gray-600 dark:text-gray-300 text-lg px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-10">

        <!-- Hero Section -->
        <section id="hero" class="text-center py-16">
            <img id="hero-image" src="https://placehold.co/128x128/1f2937/f3f4f6?text=A" alt="صورة شخصية" class="w-32 h-32 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg mx-auto mb-6">
            <h1 id="hero-title" class="text-4xl font-bold text-gray-800 dark:text-white"></h1>
            <p id="hero-subtitle" class="mt-2 text-xl text-blue-600 dark:text-blue-400"></p>
            <p id="about-text" class="mt-6 max-w-2xl mx-auto text-gray-600 dark:text-gray-400 text-lg"></p>
            <div id="social-links" class="mt-8 flex justify-center space-x-6 rtl:space-x-reverse"></div>
            <a id="hero-cta-btn" href="#" class="mt-8 inline-block bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-orange-500 transition-all"></a>
        </section>

        <!-- Dynamic Sections Container -->
        <div id="sections-container" class="space-y-12"></div>

    </main>

    <footer class="text-center py-8 mt-10">
        <p id="footer-text" class="text-gray-500 dark:text-gray-400 text-sm"></p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        let translations;
        let currentLang = localStorage.getItem('lang') || 'ar';

        async function loadContent() {
            try {
                const response = await fetch(`./_data/${currentLang}.json`);
                if (!response.ok) throw new Error('Network response was not ok');
                translations = await response.json();
                renderContent();
            } catch (error) {
                console.error(`Could not load content file for ${currentLang}:`, error);
                document.body.innerHTML = `<div style="text-align: center; padding: 50px;">Error loading content. Please check the _data/${currentLang}.json file.</div>`;
            }
        }

        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        const darkModeSwitcher = document.getElementById('darkModeSwitcher');
        const langSwitcher = document.getElementById('languageSwitcher');
        const body = document.body;

        const iconMap = {
            linkedin: 'fab fa-linkedin',
            github: 'fab fa-github',
            email: 'fas fa-envelope',
            phone: 'fas fa-phone',
            website: 'fas fa-globe'
        };

        function renderContent() {
            const content = translations;
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            langSwitcher.textContent = currentLang === 'ar' ? 'EN' : 'AR';
            
            document.title = content.pageTitle || 'السيرة الذاتية';
            document.getElementById('nav-logo').textContent = content.navName || '';
            document.getElementById('hero-title').textContent = content.heroTitle || '';
            document.getElementById('hero-subtitle').textContent = content.heroSubtitle || '';
            document.getElementById('about-text').textContent = content.aboutText || '';
            document.getElementById('hero-image').src = content.heroImage || '';
            document.getElementById('footer-text').innerHTML = content.footerText || '';
            
            const heroCtaBtn = document.getElementById('hero-cta-btn');
            if(heroCtaBtn) {
                heroCtaBtn.textContent = content.heroContactBtn || '';
                const emailLink = content.social_links.find(link => link.type === 'email');
                if (emailLink) {
                    heroCtaBtn.href = `mailto:${emailLink.value}`;
                }
            }

            const socialContainer = document.getElementById('social-links');
            if (socialContainer && content.social_links) {
                socialContainer.innerHTML = content.social_links.map(link => {
                    if (!link.value) return ''; 
                    const iconClass = iconMap[link.type] || 'fas fa-link';
                    let href = link.value;
                    if(link.type === 'email') href = `mailto:${link.value}`;
                    if(link.type === 'phone') href = `tel:${link.value}`;
                    return `<a href="${href}" target="_blank" rel="noopener noreferrer" class="text-2xl text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400"><i class="${iconClass}"></i></a>`;
                }).join('');
            }

            const sectionsContainer = document.getElementById('sections-container');
            if (sectionsContainer && content.sections) {
                sectionsContainer.innerHTML = content.sections.map(section => {
                    let contentHtml = '';
                    if (section.type === 'experience' && section.items) {
                        contentHtml = section.items.map(item => `
                            <div class="mb-8">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white">${item.title}</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">${item.location}</p>
                                <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-1 rtl:list-outside rtl:pr-4">
                                    ${item.description.map(d => `<li>${d}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('');
                    } else if (section.type === 'skills' && section.items) {
                        contentHtml = section.items.map(item => `
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm text-center flex items-center justify-center gap-2">
                                ${item.icon_url ? `<img src="${item.icon_url}" alt="${item.name}" class="h-6">` : ''}
                                <h4 class="font-semibold text-gray-700 dark:text-gray-200">${item.name}</h4>
                            </div>
                        `).join('');
                        contentHtml = `<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">${contentHtml}</div>`;
                    } else if (section.type === 'projects' && section.items) {
                         contentHtml = section.items.map(item => `
                            <a href="${item.link}" target="_blank" class="block bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all">
                                <img src="${item.icon}" alt="${item.title}" class="h-16 mx-auto mb-4 rounded-lg">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white">${item.title}</h3>
                                <p class="text-gray-600 dark:text-gray-400 mt-2">${item.description}</p>
                            </a>
                        `).join('');
                         contentHtml = `<div class="grid grid-cols-1 md:grid-cols-2 gap-8">${contentHtml}</div>`;
                    } else if (section.type === 'certificates' && section.items) {
                         contentHtml = section.items.map(item => `
                            <a href="${item.link}" target="_blank" class="block bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all text-center">
                                <img src="${item.logo}" alt="${item.title}" class="h-12 mx-auto mb-4" style="object-fit: contain;">
                                <h3 class="text-lg font-bold text-gray-800 dark:text-white">${item.title}</h3>
                            </a>
                        `).join('');
                         contentHtml = `<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">${contentHtml}</div>`;
                    }

                    return `
                        <section id="${section.id}" class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md">
                            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white">${section.title}</h2>
                            <div>${contentHtml}</div>
                        </section>
                    `;
                }).join('');
            }
        }

        function applyDarkMode() {
            const moonIcon = '<i class="fas fa-moon"></i>';
            const sunIcon = '<i class="fas fa-sun"></i>';
            if (isDarkMode) {
                body.classList.add('dark');
                darkModeSwitcher.innerHTML = sunIcon;
            } else {
                body.classList.remove('dark');
                darkModeSwitcher.innerHTML = moonIcon;
            }
        }

        async function switchLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            localStorage.setItem('lang', currentLang);
            await loadContent();
        }

        langSwitcher.addEventListener('click', switchLanguage);
        darkModeSwitcher.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            applyDarkMode();
        });
        
        loadContent();
        applyDarkMode();
    });
    </script>

</body>
</html>
